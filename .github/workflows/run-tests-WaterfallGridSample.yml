name: WaterfallGridSample

on:
  workflow_dispatch:
  push:

jobs:
  build:
    name: Build and Test
    runs-on: macos-14
    steps:
    - uses: actions/checkout@v4
    - name: List available Xcode versions
      run: ls /Applications | grep Xcode
    - name: Set up Xcode version
      run: sudo xcode-select -s /Applications/Xcode_15.4.app/Contents/Developer
    - name: Show current version of Xcode
      run: xcodebuild -version
    - name: Show Xcode embedded SDKs
      run: xcodebuild -showsdks
    - name: Show buildable schemes
      run: xcodebuild -list
    - name: Show eligible build destinations
      run: xcodebuild -showdestinations -scheme WaterfallGrid
    - name: Build and run tests for destination
      run: xcodebuild test -scheme WaterfallGrid -destination "platform=iOS Simulator,OS=17.2,name=iPhone 15 Pro"
